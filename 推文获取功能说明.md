# 推文获取功能详细说明

## 功能概述

本项目现已支持完整的推文获取功能，包括获取单条推文、批量获取多条推文和搜索最近推文，为用户提供强大的推文信息查询能力。这些功能对免费用户完全可用！

## 新增工具说明

### 1. `get_tweet` - 获取单条推文
获取指定推文的详细内容和信息。

**参数说明：**
- `tweet_id` (字符串，必需): 要获取的推文ID
- `include_author` (布尔值，可选): 是否包含作者信息，默认为true

**返回信息：**
- 推文ID和文本内容
- 创建时间和语言
- 作者信息（姓名、用户名、认证状态）
- 引用推文信息（如果有）

**使用场景：**
- 查看推文内容后决定是否回复
- 获取推文详情用于引用转发
- 验证推文的真实性和完整性

**示例：**
```json
{
  "name": "get_tweet",
  "arguments": {
    "tweet_id": "1234567890123456789",
    "include_author": true
  }
}
```

### 2. `get_tweets` - 批量获取推文
一次性获取多条推文的信息，提高效率。

**参数说明：**
- `tweet_ids` (数组，必需): 推文ID列表，最多100个
- `include_author` (布尔值，可选): 是否包含作者信息，默认为true

**使用场景：**
- 批量分析多条推文内容
- 获取推文串的完整信息
- 比较不同推文的内容和数据

**示例：**
```json
{
  "name": "get_tweets",
  "arguments": {
    "tweet_ids": ["1234567890", "9876543210", "5555666777"],
    "include_author": true
  }
}
```

### 3. `search_tweets` - 搜索推文
搜索最近7天内符合条件的推文。

**参数说明：**
- `query` (字符串，必需): 搜索查询语句
- `max_results` (整数，可选): 最大返回结果数，默认10，最大100
- `include_author` (布尔值，可选): 是否包含作者信息，默认为true

**搜索语法：**
- **关键词搜索**: `"AI OR artificial intelligence"`
- **话题标签**: `"#python OR #javascript"`
- **用户搜索**: `"from:username"`
- **语言过滤**: `"machine learning lang:en"`
- **排除转发**: `"AI -is:retweet"`
- **排除回复**: `"python -is:reply"`

**使用场景：**
- 监控特定话题的最新动态
- 寻找相关推文进行互动
- 发现行业趋势和热点
- 查找特定用户的最新推文

**示例：**
```json
{
  "name": "search_tweets",
  "arguments": {
    "query": "AI OR artificial intelligence -is:retweet",
    "max_results": 20,
    "include_author": true
  }
}
```

## 免费用户支持

### ✅ 完全支持的功能
- **推文内容获取** - 完整的推文文本和基本信息
- **作者信息** - 用户名、显示名、认证状态
- **时间信息** - 推文创建时间
- **语言检测** - 推文语言标识
- **引用关系** - 回复、转发、引用推文的关系
- **媒体信息** - 附加的图片、视频等媒体文件信息

### ❌ 需要付费的功能
- **推文统计数据** - 点赞数、转发数、回复数
- **用户统计数据** - 粉丝数、关注数
- **历史搜索** - 7天以前的推文搜索
- **高级分析** - 推文展示数据、参与度分析

### 📊 使用限制
- **月度限制**: 500,000次推文查看（免费用户）
- **搜索范围**: 最近7天内的推文
- **批量限制**: 单次最多获取100条推文
- **搜索结果**: 单次最多返回100条结果

## 使用工作流程

### 工作流程1：查看推文后回复
1. **获取推文内容**
   - 用户：`"获取推文 1234567890 的内容"`
   - 系统调用 `get_tweet`
   - 显示推文详细信息

2. **基于内容回复**
   - 用户：`"回复这条推文，说'很有见地的观点！'"`
   - 系统调用 `reply_to_tweet`
   - 发布回复

### 工作流程2：搜索相关推文互动
1. **搜索相关推文**
   - 用户：`"搜索包含'人工智能'的最新推文"`
   - 系统调用 `search_tweets`
   - 返回搜索结果

2. **选择推文互动**
   - 用户：`"转发第一条搜索结果"`
   - 系统调用 `retweet`
   - 完成转发

### 工作流程3：批量分析推文
1. **批量获取推文**
   - 用户：`"获取推文 123,456,789 的信息"`
   - 系统调用 `get_tweets`
   - 返回所有推文信息

2. **分析和处理**
   - 用户可以基于获取的信息做出决策
   - 选择性地回复、转发或引用

## 高级搜索技巧

### 🔍 搜索操作符
- **OR**: `"python OR javascript"` - 包含任一关键词
- **AND**: `"machine learning"` - 包含所有关键词（默认）
- **NOT**: `"AI -chatbot"` - 包含AI但不包含chatbot
- **引号**: `"exact phrase"` - 精确短语匹配

### 🏷️ 字段搜索
- **from:用户名** - 来自特定用户的推文
- **to:用户名** - 回复特定用户的推文
- **lang:语言代码** - 特定语言的推文（如lang:en）
- **#标签** - 包含特定话题标签的推文

### 🚫 过滤选项
- **-is:retweet** - 排除转发
- **-is:reply** - 排除回复
- **-is:quote** - 排除引用推文
- **has:media** - 包含媒体文件的推文
- **has:links** - 包含链接的推文

### 📅 时间过滤（付费功能）
- **since:2023-01-01** - 指定日期之后
- **until:2023-12-31** - 指定日期之前

## 返回数据格式

### 单条推文信息
```
Tweet ID: 1234567890123456789
Content: 这是推文的文本内容...
Created: 2025-01-15 10:30:00+00:00
Language: zh
Author: 张三 (@zhangsan)
Verified: Yes
Reference Type: replied_to
Referenced Tweet ID: 9876543210987654321
```

### 搜索结果格式
```
Search results for 'AI OR artificial intelligence' (15 tweets):

--- Result 1 ---
ID: 1234567890123456789
Content: 人工智能的发展速度令人惊叹...
Created: 2025-01-15 10:30:00+00:00
Language: zh
Author: 李四 (@lisi)

--- Result 2 ---
ID: 9876543210987654321
Content: AI is transforming our world...
Created: 2025-01-15 09:45:00+00:00
Language: en
Author: John Doe (@johndoe)
Verified: Yes
```

## 错误处理

### 常见错误类型
1. **推文不存在或不可访问**
   ```
   Tweet 1234567890 not found or not accessible
   ```

2. **API限制超出**
   ```
   Twitter API rate limit exceeded
   ```

3. **无效的搜索查询**
   ```
   Invalid search query format
   ```

4. **批量请求过大**
   ```
   Maximum 100 tweet IDs allowed
   ```

### 错误恢复建议
- **推文不存在**: 检查推文ID是否正确，推文可能已被删除
- **API限制**: 等待限制重置或升级到付费计划
- **搜索无结果**: 尝试更宽泛的搜索词或检查时间范围
- **权限问题**: 确认API密钥有正确的读取权限

## 最佳实践建议

### 🎯 高效使用
- **批量操作**: 尽可能使用`get_tweets`批量获取，减少API调用次数
- **精确搜索**: 使用具体的搜索词和过滤器，提高结果相关性
- **缓存结果**: 本地保存常用的推文信息，避免重复请求

### 🔒 隐私和安全
- **尊重隐私**: 不要获取和存储敏感的个人信息
- **遵守条款**: 遵循Twitter的使用条款和API政策
- **适度使用**: 避免过度频繁的API调用

### 📈 性能优化
- **合理分页**: 搜索大量结果时使用适当的max_results值
- **错误重试**: 实现指数退避的重试机制
- **监控使用量**: 跟踪API使用情况，避免超出限制

## 与现有功能的集成

### 🔄 与回复功能结合
```
1. 获取推文内容 → 2. 分析内容 → 3. 创建相关回复
```

### 🔁 与转发功能结合
```
1. 搜索相关推文 → 2. 选择合适推文 → 3. 转发或引用转发
```

### 📝 与草稿功能结合
```
1. 获取推文信息 → 2. 创建回复草稿 → 3. 完善后发布
```

这个推文获取功能大大增强了用户与Twitter/X平台的互动能力，提供了完整的信息查询和分析工具，让用户能够更好地了解和参与推文生态系统。